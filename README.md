# perceptual-uncertainty
This file provides brief descriptions of schedules and only critical variables within schedules. Contact aizquie@psych.ucla.edu with questions about schedules and all other variables. Please also email aizquie@psych.ucla.edu for help with changing/modifying these schedules or to request additional versions of existing tasks (e.g., small changes have been made throughout the years for efficiency and improvement, if interested in a particular version of the task, please email and I’ll provide that version if it had been used by us previously).

Pre-training:
Phase1: Habituation phase, delivers 5 pellets and tracks screen touches.
Phase2: Initial touch training, rats learn to nosepoke the white square stimulus at the center of the screen to receive rewards.
Phase3: Two stage response training. After initiation, an unambiguous Gabor stimulus is presented in the center of the screen. Simultaneously, a white square stimulus is presented at the correct response side (left or right). Both central Gabor stimulus and the side response stimulus remain on the screen. Rats need to nose-poke the correct side to get the reward. For counterbalancing of stimulus orientation->response side (e.g., vertical->left, horizontal->right), change Group2. Gabor images 1:3 are vertical, Gabor images 4:6 are horizontal; response side 1 is left and response side 3 is right. Response location 2 is always center. 
Phase4: Response learning. After initiation, an unambiguous Gabor stimulus is presented in the center of the screen. Unlike in the previous phase, both side response options are presented simultaneously with the Gabor stimulus. A rat must respond to the correct location (according to the stimulus-response mapping rule). Upon the nose-poke, the reward is delivered immediately.
Phase5: Probabilistic reward. In this phase, Gabor stimulus disappears before the choice options are presented and reward is delivered probabilistically, but immediately. Rats must first nose-poke at the center to initiate the trial as in previous phases. Then a Gabor image is shown at the center (only unambiguous Gabor stimuli are used at this stage). Once the Gabor stimulus disappears, both side compartments are illuminated and a rat can make the choice between the left and right response. If the response is correct, the reward is delivered immediately, but probabilistically. Incorrect responses are not rewarded. To change the duration of Gabor stimulus presentation, change the value of image_time variable. To change the probability of reward, modify the Reinforcement_Probability list (in the provided schedule 0.1 of correct trials will not be rewarded. One easy way to make this task deterministic, not probabilistic, is to remove all 0s from the list; then, all correct trials will be rewarded).
Phase6: Delayed rewards. This stage introduces delays to rewards, but is otherwise similar to Phase5. The delays are stored in reward_delay list that can be changed. 
Phase7: Re-initiation learning. In this phase, re-initiations are introduced. Reinitiation_available_time variable value is the number of seconds, counting from the time the response is indicated, after which initiation of the new trial is available (initiation stimulus is presented in the center of the screen).  Perceptually ambiguous stimuli are also introduced (so that the perceptual ambiguity on its own is not novel to rats). However, performance on trials with perceptually ambiguous stimuli is not counted when calculating percent correct in this pre-training stage. In Gabor_images list: images 1:4 –unambiguous vertical, 8:11 –unambiguous horizontal, 5:7 – ambiguous vertical, 12:14 – ambiguous horizontal.

Main task: 
On each trial, a white square stimulus is presented in the center of the screen, indicating that the trial can be initiated. Once nose-poke to the central stimulus is detected, the stimulus disappears, starting the trial. A Gabor stimulus is then presented on a grey background; the grey background appears first very briefly for 0.1-0.3s (uniformly distributed, can be modified by changing the prestim list) followed by stimulus presentation (the duration of stimulus presentation is stored in image_time variable and can be modified). After Gabor disappearance, two identical white stimuli are presented on the left and right compartments of the screen. A rat is required to respond within 40 seconds (can be modified by changing choice_time variable) to the correct location depending on the Gabor stimulus orientation (stimulus orientation->response side should remain consistent from Phase3 for each rat). Correct choices are reinforced probabilistically (0.3 of correct trials will not be rewarded; can be changed by modifying the Reinforcement_Probability list). Re-initiation of a new trial becomes available after Reinitiation_available_time variable value (can be changed).
Reversal task:
The Gabor stimuli selected for reversal learning should be stored in Gabor_images list. Stimulus->response assignment is stored in Group2 and should be changed from the main task. Re-initiations are not available in reversal task; other parameters remain the same. 


Making changes to other variables:
Changes to some task variables are described above, here are some other task parameters that can be easily modified:
Presented Gabor stimuli can be changed by linking images to the Gabor_images list (image dimensions may need to be changed to 200x200pixels). Store the image numbers corresponding to vertical orientation in V list, and image numbers with horizontal orientation in H list. StimImages folders include some examples of stimuli.
To modify delay to rewards on reinforced trials, change the values in reward_delay list. For example, values of delay to reward can be generated in MatLab according to the desired distribution and then copied into the reward_delay list through insert->add values->specify with delimiter.
To change the amount of time that is given to rats to indicate their choice after response stimulus presentation, choice_time variable can be modified. 

Please contact us (aizquie@psych.ucla.edu) with questions, or requests for additional changes, modifications and versions.
